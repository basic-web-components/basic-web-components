<!--
A button with a simple generic style.
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../basic-shared/basic-shared.html">

<dom-module id="basic-button">
  <template>

    <style>
    :host {
      display: inline-block;
      outline: none;
    }

    button {
      background: none; /* Better to start with no background than a browser-dependent one. */
      border: none; /* Many button styles don't want a border by default. */
      box-sizing: border-box;
      color: inherit; /* Suppress browser's use of special button text color. */
      cursor: default;
      /* cursor: pointer; */ /* Improves consistency */
      font: inherit;
      /*
      TODO: We want the inner button to be as tall as the basic-button host. We used to
      be able to do this with height: 100%, but this no longer seems to work.
      */
      /* height: 100%; */
      margin: 0; /* Addresses margins set differently in IE6/7, FF3+, S5, Chrome */
      text-align: left; /* Many more things behave like buttons than want to be center-aligned like a stock button. */
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      vertical-align: baseline; /* Improves appearance and consistency in all browsers */
      width: 100%;
    }

    button[isdisabled] {
      cursor: default; /* Re-set default cursor for disabled buttons */
    }

    /*
     * Generic styling
     *
     * TODO: Replace use of deprecated ::shadow selector.
     */
    :host([generic=""])::shadow button {
      background: whitesmoke;
      background-image: -webkit-linear-gradient(top, white, #e6e6e6);
      background-image: linear-gradient(top, white, #e6e6e6);
      border: 1px solid #ccc;
      border-radius: 3px;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, .2), 0 1px 2px rgba(0, 0, 0, .05);
      color: #333;
      outline: none;
      padding: 0.3em 0.6em;
      text-align: center;
      text-shadow: 0 1px 1px rgba(255,255,255,.75);
      white-space: nowrap;
      vertical-align: middle;
    }

    :host([generic=""].quiet)::shadow button {
      /* Opt-out of border, etc., in normal state. */
      background: none;
      background-color: transparent;
      border-color: transparent;
      box-shadow: none;
    }

    :host([generic=""])::shadow button:hover {
      background-color: #e6e6e6;
      background-image: -webkit-linear-gradient(top, white, #eee);
      background-image: linear-gradient(top, white, #eee);
      border-bottom-color: #ccc;
      border-left-color: #ddd;
      border-right-color: #ddd;
      border-top-color: #e0e0e0;
      color: #222;
      text-shadow: 0 1px 3px white;
    }

    :host([generic=""])::shadow button:active {
      background-color: #d9d9d9;
      background-image: none;
      box-shadow: inset 0 1px 4px 2gba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
      color: #111;
    }

    :host([generic=""])::shadow button:active,
    :host([generic=""])::shadow button:focus {
      border-color: #4d90fe;
    }

    :host([generic=""][isdisabled])::shadow button {
      background-color: whitesmoke;
      background-image: none;
      border: 1px solid #ccc;
      box-shadow: none;
      color: #999;
      text-shadow: none;
    }
    </style>

    <button id="button">
      <content></content>
    </button>

  </template>
</dom-module>

<script>
Polymer({

  behaviors: [Basic.Generic],

  is: 'basic-button',

  properties: {

    // We would *really* like to call this attribute "disabled", but that causes
    // problems in IE. And we can't call it "isDisabled" (camel case) either.
    // See https://github.com/Polymer/polymer/issues/372.
    isdisabled: {
      observer: '_isdisabledChanged',
      reflect: true,
      value: null
    }

  },

  _isdisabledChanged: function() {
    this.$.button.disabled = this.isdisabled;
  }

});
</script>
