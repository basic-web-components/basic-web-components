<!--
Aspect which maps direction semantics (goLeft, goRight, etc.) to selection
semantics (selectPrevious, selectNext, etc.).

@element basic-direction-selection
-->

<link rel="import" href="../basic-aspect/basic-aspect.html">

<script>
Polymer(mixin(BasicAspectMixin, {

  contribute: {

    /*
    TODO: How to declare occlusion of lower-level semantics?

    occlude: [
      'goDown',
      'goEnd',
      'goLeft',
      'goRight',
      'goStart',
      'goUp'
    ],
    expose: [
      'selectFirst',
      'selectLast',
      'selectNext',
      'selectPrevious'
    ]

    or

    occlude: ['direction']    where "direction" is the name of an aspect or
                              part of an aspect

    */

    goDown: function() {
      return this.selectNext();
    },

    goEnd: function() {
      return this.selectLast();
    },

    goLeft: function() {
      return this.selectPrevious();
    },

    goRight: function() {
      return this.selectNext();
    },

    goStart: function() {
      return this.selectFirst();
    },

    goUp: function() {
      return this.selectPrevious();
    }

  },

  is: 'basic-direction-selection',

  // Default implementations will be ovewritten with collective methods.
  selectFirst: function() {},
  selectLast: function() {},
  selectNext: function() {},
  selectPrevious: function() {},

  // TODO: Need to find home for this DOM-specific navigation code.

  // Return true if the selected control is displayed inline.
  _selectedItemIsInline: function() {
    var selectedItem = this.selectedItem;
    if (!selectedItem) {
      return false;
    }
    var style = getComputedStyle(selectedItem);
    var inlineDisplayValues = ['inline', 'inline-block', 'inline-table'];
    var itemIsInline = (inlineDisplayValues.indexOf(style.display) >= 0);
    return itemIsInline;
  }

}));
</script>
